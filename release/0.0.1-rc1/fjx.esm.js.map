{"version":3,"file":"fjx.esm.js","sources":["../src/index.ts"],"sourcesContent":["import {\n  EachCalllbackType,\n  ObjectInterface,\n  ReduceIteratorCallbackType,\n  IteratorCalllbackType,\n  ReduceIteratorAsyncCallbackType,\n} from \"./types\";\n\nexport const IS_SYMBOL = typeof Symbol !== \"undefined\";\nexport const IS_PROMISE = typeof Promise !== \"undefined\";\nexport function isPromise<T = any>(value: any): value is Promise<T> {\n  return IS_PROMISE && (value instanceof Promise);\n}\nexport function isIterable<T = any>(iter: any): iter is Iterable<T> {\n  return IS_SYMBOL && !!(iter && iter[Symbol.iterator]);\n}\n\nexport function exec<T, U = T>(v: Promise<T>, f: (pv: T) => U): Promise<U>;\nexport function exec<T, U = T>(v: T, f: (pv: T) => U): U;\nexport function exec<T, U = T>(v: Promise<T> | T, f: (pv: T) => U): Promise<U> | U;\nexport function exec<T, U = T>(v: T | Promise<T>, f: (pv: T) => U) {\n  return isPromise(v) ? v.then(pv => f(pv)) : f(v);\n}\nexport function reduceA<T, U = T>(\n  callbackFn: ReduceIteratorAsyncCallbackType<T, U>,\n  iterator: Iterable<U | Promise<U>>,\n  initial?: T) {\n  return reduce<T | Promise<T>, U | Promise<U>>(async (prev, cur) => {\n    const prev2 = await prev;\n    const cur2 = await cur;\n\n    return callbackFn(prev2, cur2, iterator);\n  }, iterator, initial) as Promise<T>;\n}\nexport function reduce<T, U = T>(\n  callbackFn: ReduceIteratorCallbackType<T, U>,\n  iterator: Iterable<U>, initial?: T) {\n  let cur = initial;\n\n  for (const value of iterator) {\n    cur = callbackFn(cur, value, iterator);\n  }\n  return cur;\n}\n\nexport function eachArray<T = any>(f: EachCalllbackType<T, number, void>, iterator: T[]) {\n  iterator.forEach(f);\n  return iterator;\n}\n\nexport function eachObject<T = any>(f: EachCalllbackType<T, string, void>, iterator: ObjectInterface<T>) {\n  for (const key in iterator) {\n    f(iterator[key], key, iterator);\n  }\n  return iterator;\n}\n\nexport function eachIterator<T = any>(f: IteratorCalllbackType<T, void>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    exec(value, v => f(v, iterator));\n  }\n  return iterator;\n}\n\nexport async function eachIteratorA<T = any>(f: IteratorCalllbackType<T, void>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    f(await value, iterator);\n  }\n}\n\nexport function mapArray<T = any, U = any>(f: EachCalllbackType<T, number, U>, iterator: T[]) {\n  return iterator.map<U>(f);\n}\n\nexport function mapObject<T = any, U = any>(f: EachCalllbackType<T, string, U>, iterator: ObjectInterface<T>) {\n  const obj: ObjectInterface<U> = {};\n\n  for (const key in iterator) {\n    obj[key] = f(iterator[key], key, iterator);\n  }\n  return obj;\n}\n\nexport function *mapIterator<T = any, U = any>(f: IteratorCalllbackType<T, U>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    yield exec(value, v => f(v, iterator));\n  }\n}\n\nexport async function *mapIteratorA<T = any, U = any>(f: IteratorCalllbackType<T, U>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    yield f(await value, iterator);\n  }\n}\n\nexport function filterArray<T = any>(f: EachCalllbackType<T, number, boolean>, iterator: T[]) {\n  return iterator.map(f);\n}\n\nexport function filterObject<T = any>(f: EachCalllbackType<T, string, boolean>, iterator: ObjectInterface<T>) {\n  const obj: Partial<ObjectInterface<T>> = {};\n\n  for (const key in iterator) {\n    f(iterator[key], key, iterator) && (obj[key] = iterator[key]);\n  }\n  return obj;\n}\n\nexport async function *filterIterator<T = any>(\n  f: IteratorCalllbackType<T, boolean>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    f(value, iterator) && (yield value);\n  }\n}\n\nexport async function *filterIteratorA<T = any>(\n  f: IteratorCalllbackType<T, boolean | Promise<boolean>>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    f(await value, iterator) && (yield value);\n  }\n}\n\nexport * from \"./types\";\n"],"names":["IS_SYMBOL","Symbol","IS_PROMISE","Promise","isPromise","value","isIterable","iter","iterator","exec","v","f","then","pv","reduceA","callbackFn","initial","reduce","prev","cur","prev2","_a","cur2","iterator_1","tslib_1","eachArray","forEach","eachObject","key","eachIterator","iterator_2","eachIteratorA","iterator_3","_b","_c","mapArray","map","mapObject","obj","mapIterator","iterator_4","mapIteratorA","iterator_5","filterArray","filterObject","filterIterator","iterator_6","filterIteratorA","iterator_7","_d"],"mappings":"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"}
{"version":3,"file":"fjx.min.js","sources":["../src/index.ts"],"sourcesContent":["import {\n  EachCalllbackType,\n  ObjectInterface,\n  ReduceIteratorCallbackType,\n  IteratorCalllbackType,\n  ReduceIteratorAsyncCallbackType,\n} from \"./types\";\n\nexport const IS_SYMBOL = typeof Symbol !== \"undefined\";\nexport const IS_PROMISE = typeof Promise !== \"undefined\";\nexport function isPromise<T = any>(value: any): value is Promise<T> {\n  return IS_PROMISE && (value instanceof Promise);\n}\nexport function isIterable<T = any>(iter: any): iter is Iterable<T> {\n  return IS_SYMBOL && !!(iter && iter[Symbol.iterator]);\n}\n\nexport function exec<T, U = T>(v: Promise<T>, f: (pv: T) => U): Promise<U>;\nexport function exec<T, U = T>(v: T, f: (pv: T) => U): U;\nexport function exec<T, U = T>(v: Promise<T> | T, f: (pv: T) => U): Promise<U> | U;\nexport function exec<T, U = T>(v: T | Promise<T>, f: (pv: T) => U) {\n  return isPromise(v) ? v.then(pv => f(pv)) : f(v);\n}\nexport function reduceA<T, U = T>(\n  callbackFn: ReduceIteratorAsyncCallbackType<T, U>,\n  iterator: Iterable<U | Promise<U>>,\n  initial?: T) {\n  return reduce<T | Promise<T>, U | Promise<U>>(async (prev, cur) => {\n    const prev2 = await prev;\n    const cur2 = await cur;\n\n    return callbackFn(prev2, cur2, iterator);\n  }, iterator, initial) as Promise<T>;\n}\nexport function reduce<T, U = T>(\n  callbackFn: ReduceIteratorCallbackType<T, U>,\n  iterator: Iterable<U>, initial?: T) {\n  let cur = initial;\n\n  for (const value of iterator) {\n    cur = callbackFn(cur, value, iterator);\n  }\n  return cur;\n}\n\nexport function eachArray<T = any>(f: EachCalllbackType<T, number, void>, iterator: T[]) {\n  iterator.forEach(f);\n  return iterator;\n}\n\nexport function eachObject<T = any>(f: EachCalllbackType<T, string, void>, iterator: ObjectInterface<T>) {\n  for (const key in iterator) {\n    f(iterator[key], key, iterator);\n  }\n  return iterator;\n}\n\nexport function eachIterator<T = any>(f: IteratorCalllbackType<T, void>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    exec(value, v => f(v, iterator));\n  }\n  return iterator;\n}\n\nexport async function eachIteratorA<T = any>(f: IteratorCalllbackType<T, void>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    f(await value, iterator);\n  }\n}\n\nexport function mapArray<T = any, U = any>(f: EachCalllbackType<T, number, U>, iterator: T[]) {\n  return iterator.map<U>(f);\n}\n\nexport function mapObject<T = any, U = any>(f: EachCalllbackType<T, string, U>, iterator: ObjectInterface<T>) {\n  const obj: ObjectInterface<U> = {};\n\n  for (const key in iterator) {\n    obj[key] = f(iterator[key], key, iterator);\n  }\n  return obj;\n}\n\nexport function *mapIterator<T = any, U = any>(f: IteratorCalllbackType<T, U>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    yield exec(value, v => f(v, iterator));\n  }\n}\n\nexport async function *mapIteratorA<T = any, U = any>(f: IteratorCalllbackType<T, U>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    yield f(await value, iterator);\n  }\n}\n\nexport function filterArray<T = any>(f: EachCalllbackType<T, number, boolean>, iterator: T[]) {\n  return iterator.map(f);\n}\n\nexport function filterObject<T = any>(f: EachCalllbackType<T, string, boolean>, iterator: ObjectInterface<T>) {\n  const obj: Partial<ObjectInterface<T>> = {};\n\n  for (const key in iterator) {\n    f(iterator[key], key, iterator) && (obj[key] = iterator[key]);\n  }\n  return obj;\n}\n\nexport async function *filterIterator<T = any>(\n  f: IteratorCalllbackType<T, boolean>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    f(value, iterator) && (yield value);\n  }\n}\n\nexport async function *filterIteratorA<T = any>(\n  f: IteratorCalllbackType<T, boolean | Promise<boolean>>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    f(await value, iterator) && (yield value);\n  }\n}\n\nexport * from \"./types\";\n"],"names":["IS_SYMBOL","Symbol","IS_PROMISE","Promise","isPromise","value","exec","v","f","then","pv","reduce","callbackFn","iterator","initial","cur","iterator_1","tslib_1","iter","prev","prev2","_a","cur2","forEach","key","iterator_2","iterator_3","_b","_c","map","obj","iterator_4","iterator_5","iterator_6","iterator_7","_d"],"mappings":";;;;;;;+vEAQO,IAAMA,EAA8B,oBAAXC,OACnBC,EAAgC,oBAAZC,iBACjBC,EAAmBC,UAC1BH,GAAeG,aAAiBF,iBASzBG,EAAeC,EAAmBC,UACzCJ,EAAUG,GAAKA,EAAEE,KAAK,SAAAC,UAAMF,EAAEE,KAAOF,EAAED,YAahCI,EACdC,EACAC,EAAuBC,WACnBC,EAAMD,UAEU,IAAAE,EAAAC,EAAAJ,iCAAU,CAC5BE,EAAMH,EAAWG,UAAYF,4GAExBE,kEA7B2BG,UAC3BlB,MAAgBkB,IAAQA,EAAKjB,OAAOY,oCAU3CD,EACAC,EACAC,qBACOH,EAAuC,SAAOQ,EAAMJ,yGACrCI,iBAAdC,EAAQC,YACKN,iBAAbO,EAAOD,YAENT,EAAWQ,EAAOE,EAAMT,UAC9BA,EAAUC,gCAaoBN,EAAuCK,UACxEA,EAASU,QAAQf,GACVK,uBAG2BL,EAAuCK,OACpE,IAAMW,KAAOX,EAChBL,EAAEK,EAASW,GAAMA,EAAKX,UAEjBA,yBAG6BL,EAAmCK,mBACnD,IAAAY,EAAAR,EAAAJ,iCAClBP,UAAY,SAAAC,UAAKC,EAAED,EAAGM,6GAEjBA,0BAGoCL,EAAmCK,oIAC1Da,EAAAT,EAAAJ,oDAATR,UACTsB,EAAAnB,KAAQH,WAARsB,gBAAEC,SAAaf,wOAIwBL,EAAoCK,UACtEA,EAASgB,IAAOrB,uBAGmBA,EAAoCK,OACxEiB,EAA0B,OAE3B,IAAMN,KAAOX,EAChBiB,EAAIN,GAAOhB,EAAEK,EAASW,GAAMA,EAAKX,UAE5BiB,wBAGsCtB,EAAgCK,yFACzDkB,EAAAd,EAAAJ,sDACZP,UAAY,SAAAC,UAAKC,EAAED,EAAGM,aAA5Bc,+OAIkDnB,EAAgCK,gIAChEmB,EAAAf,EAAAJ,oDAATR,UACHsB,EAAAnB,OAAQH,qCAARsB,gBAAEC,SAAaf,wCAArBe,gPAIiCpB,EAA0CK,UACtEA,EAASgB,IAAIrB,0BAGgBA,EAA0CK,OACxEiB,EAAmC,OAEpC,IAAMN,KAAOX,EAChBL,EAAEK,EAASW,GAAMA,EAAKX,KAAciB,EAAIN,GAAOX,EAASW,WAEnDM,2BAIPtB,EAAsCK,8HAClBoB,EAAAhB,EAAAJ,oDAATR,UACTG,EAAEH,EAAOQ,QAAoBR,4CAANuB,qQAKzBpB,EAAyDK,iIACrCqB,EAAAjB,EAAAJ,oDAATR,UACTuB,EAAApB,OAAQH,mBAARuB,gBAAEO,SAAatB,SAAoBR,2CAAN8B"}
{"version":3,"file":"fjx.js","sources":["../src/index.ts"],"sourcesContent":["import {\n  EachCalllbackType,\n  ObjectInterface,\n  ReduceIteratorCallbackType,\n  IteratorCalllbackType,\n  ReduceIteratorAsyncCallbackType,\n} from \"./types\";\n\nexport const IS_SYMBOL = typeof Symbol !== \"undefined\";\nexport const IS_PROMISE = typeof Promise !== \"undefined\";\nexport function isPromise<T = any>(value: any): value is Promise<T> {\n  return IS_PROMISE && (value instanceof Promise);\n}\nexport function isIterable<T = any>(iter: any): iter is Iterable<T> {\n  return IS_SYMBOL && !!(iter && iter[Symbol.iterator]);\n}\n\nexport function exec<T, U = T>(v: Promise<T>, f: (pv: T) => U): Promise<U>;\nexport function exec<T, U = T>(v: T, f: (pv: T) => U): U;\nexport function exec<T, U = T>(v: Promise<T> | T, f: (pv: T) => U): Promise<U> | U;\nexport function exec<T, U = T>(v: T | Promise<T>, f: (pv: T) => U) {\n  return isPromise(v) ? v.then(pv => f(pv)) : f(v);\n}\nexport function reduceA<T, U = T>(\n  callbackFn: ReduceIteratorAsyncCallbackType<T, U>,\n  iterator: Iterable<U | Promise<U>>,\n  initial?: T) {\n  return reduce<T | Promise<T>, U | Promise<U>>(async (prev, cur) => {\n    const prev2 = await prev;\n    const cur2 = await cur;\n\n    return callbackFn(prev2, cur2, iterator);\n  }, iterator, initial) as Promise<T>;\n}\nexport function reduce<T, U = T>(\n  callbackFn: ReduceIteratorCallbackType<T, U>,\n  iterator: Iterable<U>, initial?: T) {\n  let cur = initial;\n\n  for (const value of iterator) {\n    cur = callbackFn(cur, value, iterator);\n  }\n  return cur;\n}\n\nexport function eachArray<T = any>(f: EachCalllbackType<T, number, void>, iterator: T[]) {\n  iterator.forEach(f);\n  return iterator;\n}\n\nexport function eachObject<T = any>(f: EachCalllbackType<T, string, void>, iterator: ObjectInterface<T>) {\n  for (const key in iterator) {\n    f(iterator[key], key, iterator);\n  }\n  return iterator;\n}\n\nexport function eachIterator<T = any>(f: IteratorCalllbackType<T, void>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    exec(value, v => f(v, iterator));\n  }\n  return iterator;\n}\n\nexport async function eachIteratorA<T = any>(f: IteratorCalllbackType<T, void>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    f(await value, iterator);\n  }\n}\n\nexport function mapArray<T = any, U = any>(f: EachCalllbackType<T, number, U>, iterator: T[]) {\n  return iterator.map<U>(f);\n}\n\nexport function mapObject<T = any, U = any>(f: EachCalllbackType<T, string, U>, iterator: ObjectInterface<T>) {\n  const obj: ObjectInterface<U> = {};\n\n  for (const key in iterator) {\n    obj[key] = f(iterator[key], key, iterator);\n  }\n  return obj;\n}\n\nexport function *mapIterator<T = any, U = any>(f: IteratorCalllbackType<T, U>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    yield exec(value, v => f(v, iterator));\n  }\n}\n\nexport async function *mapIteratorA<T = any, U = any>(f: IteratorCalllbackType<T, U>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    yield f(await value, iterator);\n  }\n}\n\nexport function filterArray<T = any>(f: EachCalllbackType<T, number, boolean>, iterator: T[]) {\n  return iterator.map(f);\n}\n\nexport function filterObject<T = any>(f: EachCalllbackType<T, string, boolean>, iterator: ObjectInterface<T>) {\n  const obj: Partial<ObjectInterface<T>> = {};\n\n  for (const key in iterator) {\n    f(iterator[key], key, iterator) && (obj[key] = iterator[key]);\n  }\n  return obj;\n}\n\nexport async function *filterIterator<T = any>(\n  f: IteratorCalllbackType<T, boolean>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    f(value, iterator) && (yield value);\n  }\n}\n\nexport async function *filterIteratorA<T = any>(\n  f: IteratorCalllbackType<T, boolean | Promise<boolean>>, iterator: Iterable<T>) {\n  for (const value of iterator) {\n    f(await value, iterator) && (yield value);\n  }\n}\n\nexport * from \"./types\";\n"],"names":["IS_SYMBOL","Symbol","IS_PROMISE","Promise","isPromise","value","isIterable","iter","iterator","exec","v","f","then","pv","reduceA","callbackFn","initial","reduce","prev","cur","prev2","_a","cur2","iterator_1","tslib_1","eachArray","forEach","eachObject","key","eachIterator","iterator_2","eachIteratorA","iterator_3","_b","_c","mapArray","map","mapObject","obj","mapIterator","iterator_4","mapIteratorA","iterator_5","filterArray","filterObject","filterIterator","iterator_6","filterIteratorA","iterator_7","_d"],"mappings":"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"}